{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(getCompareListSaga),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(addItemSaga),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(removeItemSaga),\n    _marked4 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(clearCompareListSaga),\n    _marked5 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(rootSaga);\n\nimport { all, put, takeEvery } from 'redux-saga/effects';\nimport { notification } from 'antd';\nimport { actionTypes, getCompareListSuccess, updateCompareListSuccess, addItemSuccess } from './action';\n\nvar modalSuccess = function modalSuccess(type) {\n  notification[type]({\n    message: 'Added to compare list!',\n    description: 'This product has been added to compare list!'\n  });\n};\n\nvar modalWarning = function modalWarning(type) {\n  notification[type]({\n    message: 'Removed to compare list',\n    description: 'This product has been removed from compare list!'\n  });\n};\n\nfunction getCompareListSaga() {\n  var localCompareList;\n  return _regeneratorRuntime.wrap(function getCompareListSaga$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          localCompareList = JSON.parse(localStorage.getItem('persist:martfury')).cart;\n          _context.next = 4;\n          return put(getCompareListSuccess(localCompareList));\n\n        case 4:\n          _context.next = 9;\n          break;\n\n        case 6:\n          _context.prev = 6;\n          _context.t0 = _context[\"catch\"](0);\n          console.log(_context.t0);\n\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[0, 6]]);\n}\n\nfunction addItemSaga(payload) {\n  var product, localCompare, existItem;\n  return _regeneratorRuntime.wrap(function addItemSaga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          product = payload.product;\n          localCompare = JSON.parse(JSON.parse(localStorage.getItem('persist:martfury')).compare);\n          existItem = localCompare.compareItems.find(function (item) {\n            return item.id === product.id;\n          });\n\n          if (existItem) {\n            _context2.next = 10;\n            break;\n          }\n\n          product.quantity = 1;\n          localCompare.compareItems.push(product);\n          localCompare.compareTotal++;\n          _context2.next = 10;\n          return put(updateCompareListSuccess(localCompare));\n\n        case 10:\n          _context2.next = 15;\n          break;\n\n        case 12:\n          _context2.prev = 12;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.log(_context2.t0);\n\n        case 15:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, null, [[0, 12]]);\n}\n\nfunction removeItemSaga(payload) {\n  var product, localCompare, index;\n  return _regeneratorRuntime.wrap(function removeItemSaga$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          product = payload.product;\n          localCompare = JSON.parse(JSON.parse(localStorage.getItem('persist:martfury')).compare);\n          index = localCompare.compareItems.indexOf(product);\n          localCompare.compareTotal = localCompare.compareTotal - 1;\n          localCompare.compareItems.splice(index, 1);\n          _context3.next = 8;\n          return put(updateCompareListSuccess(localCompare));\n\n        case 8:\n          modalWarning('warning');\n          _context3.next = 14;\n          break;\n\n        case 11:\n          _context3.prev = 11;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.log(_context3.t0);\n\n        case 14:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, null, [[0, 11]]);\n}\n\nfunction clearCompareListSaga() {\n  var emptyCart;\n  return _regeneratorRuntime.wrap(function clearCompareListSaga$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          emptyCart = {\n            compareItems: [],\n            compareTotal: 0\n          };\n          _context4.next = 4;\n          return put(updateCompareListSuccess(emptyCart));\n\n        case 4:\n          _context4.next = 9;\n          break;\n\n        case 6:\n          _context4.prev = 6;\n          _context4.t0 = _context4[\"catch\"](0);\n          console.log(_context4.t0);\n\n        case 9:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, null, [[0, 6]]);\n}\n\nexport default function rootSaga() {\n  return _regeneratorRuntime.wrap(function rootSaga$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return all([takeEvery(actionTypes.GET_COMPARE_LIST, getCompareListSaga)]);\n\n        case 2:\n          _context5.next = 4;\n          return all([takeEvery(actionTypes.ADD_ITEM_COMPARE, addItemSaga)]);\n\n        case 4:\n          _context5.next = 6;\n          return all([takeEvery(actionTypes.REMOVE_ITEM_COMPARE, removeItemSaga)]);\n\n        case 6:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}","map":null,"metadata":{},"sourceType":"module"}