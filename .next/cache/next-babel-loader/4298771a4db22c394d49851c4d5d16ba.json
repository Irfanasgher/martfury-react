{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(getProducts),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(getTotalOfProducts),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(getBrands),\n    _marked4 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(getProductCategories),\n    _marked5 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(getProductById),\n    _marked6 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(getProductByCategory),\n    _marked7 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(getProductByPriceRange),\n    _marked8 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(getProductByBrand),\n    _marked9 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(getProductByKeyword),\n    _marked10 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(rootSaga);\n\nimport { all, put, takeEvery, call } from 'redux-saga/effects';\nimport { polyfill } from 'es6-promise';\nimport ProductRepository from '../../repositories/ProductRepository';\nimport StaticProductRepository from '../../repositories/static/StaticProductRepository';\nimport { actionTypes, getProductsError, getProductsSuccess, getSingleProductsSuccess, getTotalProductsSuccess, getProductCategoriesSuccess, getBrandsSuccess, getProductByKeywordsSuccess } from './action';\nimport { isStaticData } from '../../utilities/app-settings';\npolyfill();\n\nfunction getProducts(_ref) {\n  var payload, data, _data;\n\n  return _regeneratorRuntime.wrap(function getProducts$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          payload = _ref.payload;\n          _context.prev = 1;\n\n          if (!(isStaticData === false)) {\n            _context.next = 10;\n            break;\n          }\n\n          _context.next = 5;\n          return call(ProductRepository.getRecords, payload);\n\n        case 5:\n          data = _context.sent;\n          _context.next = 8;\n          return put(getProductsSuccess(data));\n\n        case 8:\n          _context.next = 15;\n          break;\n\n        case 10:\n          _context.next = 12;\n          return call(StaticProductRepository.getRecords);\n\n        case 12:\n          _data = _context.sent;\n          _context.next = 15;\n          return put(getProductsSuccess(_data));\n\n        case 15:\n          _context.next = 21;\n          break;\n\n        case 17:\n          _context.prev = 17;\n          _context.t0 = _context[\"catch\"](1);\n          _context.next = 21;\n          return put(getProductsError(_context.t0));\n\n        case 21:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[1, 17]]);\n}\n\nfunction getTotalOfProducts() {\n  var result, _result;\n\n  return _regeneratorRuntime.wrap(function getTotalOfProducts$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n\n          if (!(isStaticData === false)) {\n            _context2.next = 9;\n            break;\n          }\n\n          _context2.next = 4;\n          return call(ProductRepository.getTotalRecords);\n\n        case 4:\n          result = _context2.sent;\n          _context2.next = 7;\n          return put(getTotalProductsSuccess(result));\n\n        case 7:\n          _context2.next = 14;\n          break;\n\n        case 9:\n          _context2.next = 11;\n          return call(StaticProductRepository.getTotalRecords);\n\n        case 11:\n          _result = _context2.sent;\n          _context2.next = 14;\n          return put(getTotalProductsSuccess(_result));\n\n        case 14:\n          _context2.next = 19;\n          break;\n\n        case 16:\n          _context2.prev = 16;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.log(_context2.t0);\n\n        case 19:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, null, [[0, 16]]);\n}\n\nfunction getBrands() {\n  var result, _result2;\n\n  return _regeneratorRuntime.wrap(function getBrands$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n\n          if (!(isStaticData === false)) {\n            _context3.next = 9;\n            break;\n          }\n\n          _context3.next = 4;\n          return call(ProductRepository.getBrands);\n\n        case 4:\n          result = _context3.sent;\n          _context3.next = 7;\n          return put(getBrandsSuccess(result));\n\n        case 7:\n          _context3.next = 14;\n          break;\n\n        case 9:\n          _context3.next = 11;\n          return call(StaticProductRepository.getBrands);\n\n        case 11:\n          _result2 = _context3.sent;\n          _context3.next = 14;\n          return put(getBrandsSuccess(_result2));\n\n        case 14:\n          _context3.next = 19;\n          break;\n\n        case 16:\n          _context3.prev = 16;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.log(_context3.t0);\n\n        case 19:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, null, [[0, 16]]);\n}\n\nfunction getProductCategories() {\n  var result, _result3;\n\n  return _regeneratorRuntime.wrap(function getProductCategories$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n\n          if (!(isStaticData === false)) {\n            _context4.next = 9;\n            break;\n          }\n\n          _context4.next = 4;\n          return call(ProductRepository.getProductCategories);\n\n        case 4:\n          result = _context4.sent;\n          _context4.next = 7;\n          return put(getProductCategoriesSuccess(result));\n\n        case 7:\n          _context4.next = 14;\n          break;\n\n        case 9:\n          _context4.next = 11;\n          return call(StaticProductRepository.getProductCategories);\n\n        case 11:\n          _result3 = _context4.sent;\n          _context4.next = 14;\n          return put(getProductCategoriesSuccess(_result3));\n\n        case 14:\n          _context4.next = 19;\n          break;\n\n        case 16:\n          _context4.prev = 16;\n          _context4.t0 = _context4[\"catch\"](0);\n          console.log(_context4.t0);\n\n        case 19:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, null, [[0, 16]]);\n}\n\nfunction getProductById(_ref2) {\n  var id, product, _product;\n\n  return _regeneratorRuntime.wrap(function getProductById$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          id = _ref2.id;\n          _context5.prev = 1;\n\n          if (!(isStaticData === false)) {\n            _context5.next = 10;\n            break;\n          }\n\n          _context5.next = 5;\n          return call(ProductRepository.getProductsById, id);\n\n        case 5:\n          product = _context5.sent;\n          _context5.next = 8;\n          return put(getSingleProductsSuccess(product));\n\n        case 8:\n          _context5.next = 15;\n          break;\n\n        case 10:\n          _context5.next = 12;\n          return call(StaticProductRepository.getProductsById, id);\n\n        case 12:\n          _product = _context5.sent;\n          _context5.next = 15;\n          return put(getSingleProductsSuccess(_product));\n\n        case 15:\n          _context5.next = 21;\n          break;\n\n        case 17:\n          _context5.prev = 17;\n          _context5.t0 = _context5[\"catch\"](1);\n          _context5.next = 21;\n          return put(getProductsError(_context5.t0));\n\n        case 21:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5, null, [[1, 17]]);\n}\n\nfunction getProductByCategory(_ref3) {\n  var category, result, _result4;\n\n  return _regeneratorRuntime.wrap(function getProductByCategory$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          category = _ref3.category;\n          _context6.prev = 1;\n\n          if (!(isStaticData === false)) {\n            _context6.next = 12;\n            break;\n          }\n\n          _context6.next = 5;\n          return call(ProductRepository.getProductsByCategory, category);\n\n        case 5:\n          result = _context6.sent;\n          _context6.next = 8;\n          return put(getProductsSuccess(result));\n\n        case 8:\n          _context6.next = 10;\n          return put(getTotalProductsSuccess(result.length));\n\n        case 10:\n          _context6.next = 19;\n          break;\n\n        case 12:\n          _context6.next = 14;\n          return call(StaticProductRepository.getProductsByCategory, category);\n\n        case 14:\n          _result4 = _context6.sent;\n          _context6.next = 17;\n          return put(getProductsSuccess(_result4));\n\n        case 17:\n          _context6.next = 19;\n          return put(getTotalProductsSuccess(_result4.length));\n\n        case 19:\n          _context6.next = 25;\n          break;\n\n        case 21:\n          _context6.prev = 21;\n          _context6.t0 = _context6[\"catch\"](1);\n          _context6.next = 25;\n          return put(getProductsError(_context6.t0));\n\n        case 25:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6, null, [[1, 21]]);\n}\n\nfunction getProductByPriceRange(_ref4) {\n  var payload, products, _products;\n\n  return _regeneratorRuntime.wrap(function getProductByPriceRange$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          payload = _ref4.payload;\n          _context7.prev = 1;\n\n          if (!(isStaticData === false)) {\n            _context7.next = 12;\n            break;\n          }\n\n          _context7.next = 5;\n          return call(ProductRepository.getProductsByPriceRange, payload);\n\n        case 5:\n          products = _context7.sent;\n          _context7.next = 8;\n          return put(getProductsSuccess(products));\n\n        case 8:\n          _context7.next = 10;\n          return put(getTotalProductsSuccess(products.length));\n\n        case 10:\n          _context7.next = 19;\n          break;\n\n        case 12:\n          _context7.next = 14;\n          return call(StaticProductRepository.getProductsByPriceRange, payload);\n\n        case 14:\n          _products = _context7.sent;\n          _context7.next = 17;\n          return put(getProductsSuccess(_products));\n\n        case 17:\n          _context7.next = 19;\n          return put(getTotalProductsSuccess(_products.length));\n\n        case 19:\n          _context7.next = 25;\n          break;\n\n        case 21:\n          _context7.prev = 21;\n          _context7.t0 = _context7[\"catch\"](1);\n          _context7.next = 25;\n          return put(getProductsError(_context7.t0));\n\n        case 25:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7, null, [[1, 21]]);\n}\n\nfunction getProductByBrand(_ref5) {\n  var payload, brands, products, _brands, _products2;\n\n  return _regeneratorRuntime.wrap(function getProductByBrand$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          payload = _ref5.payload;\n          _context8.prev = 1;\n\n          if (!(isStaticData === false)) {\n            _context8.next = 14;\n            break;\n          }\n\n          _context8.next = 5;\n          return call(ProductRepository.getProductsByBrands, payload);\n\n        case 5:\n          brands = _context8.sent;\n          products = [];\n          brands.forEach(function (brand) {\n            brand.products.forEach(function (product) {\n              products.push(product);\n            });\n          });\n          _context8.next = 10;\n          return put(getProductsSuccess(products));\n\n        case 10:\n          _context8.next = 12;\n          return put(getTotalProductsSuccess(products.length));\n\n        case 12:\n          _context8.next = 23;\n          break;\n\n        case 14:\n          _context8.next = 16;\n          return call(StaticProductRepository.getProductsByBrands, payload);\n\n        case 16:\n          _brands = _context8.sent;\n          _products2 = [];\n\n          _brands.forEach(function (brand) {\n            brand.products.forEach(function (product) {\n              _products2.push(product);\n            });\n          });\n\n          _context8.next = 21;\n          return put(getProductsSuccess(_products2));\n\n        case 21:\n          _context8.next = 23;\n          return put(getTotalProductsSuccess(_products2.length));\n\n        case 23:\n          _context8.next = 29;\n          break;\n\n        case 25:\n          _context8.prev = 25;\n          _context8.t0 = _context8[\"catch\"](1);\n          _context8.next = 29;\n          return put(getProductsError(_context8.t0));\n\n        case 29:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked8, null, [[1, 25]]);\n}\n\nfunction getProductByKeyword(_ref6) {\n  var keyword, searchParams, result, _result5;\n\n  return _regeneratorRuntime.wrap(function getProductByKeyword$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          keyword = _ref6.keyword;\n          _context9.prev = 1;\n\n          if (!(isStaticData === false)) {\n            _context9.next = 11;\n            break;\n          }\n\n          searchParams = {\n            title_contains: keyword\n          };\n          _context9.next = 6;\n          return call(ProductRepository.getRecords, searchParams);\n\n        case 6:\n          result = _context9.sent;\n          _context9.next = 9;\n          return put(getProductByKeywordsSuccess(result));\n\n        case 9:\n          _context9.next = 16;\n          break;\n\n        case 11:\n          _context9.next = 13;\n          return call(StaticProductRepository.getProductsByKeyword, keyword);\n\n        case 13:\n          _result5 = _context9.sent;\n          _context9.next = 16;\n          return put(getProductByKeywordsSuccess(_result5));\n\n        case 16:\n          _context9.next = 22;\n          break;\n\n        case 18:\n          _context9.prev = 18;\n          _context9.t0 = _context9[\"catch\"](1);\n          _context9.next = 22;\n          return put(getProductsError(_context9.t0));\n\n        case 22:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  }, _marked9, null, [[1, 18]]);\n}\n\nexport default function rootSaga() {\n  return _regeneratorRuntime.wrap(function rootSaga$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          _context10.next = 2;\n          return all([takeEvery(actionTypes.GET_PRODUCTS, getProducts)]);\n\n        case 2:\n          _context10.next = 4;\n          return all([takeEvery(actionTypes.GET_TOTAL_OF_PRODUCTS, getTotalOfProducts)]);\n\n        case 4:\n          _context10.next = 6;\n          return all([takeEvery(actionTypes.GET_BRANDS, getBrands)]);\n\n        case 6:\n          _context10.next = 8;\n          return all([takeEvery(actionTypes.GET_PRODUCT_CATEGORIES, getProductCategories)]);\n\n        case 8:\n          _context10.next = 10;\n          return all([takeEvery(actionTypes.GET_PRODUCTS_BY_CATEGORY, getProductByCategory)]);\n\n        case 10:\n          _context10.next = 12;\n          return all([takeEvery(actionTypes.GET_PRODUCTS_BY_PRICE_RANGE, getProductByPriceRange)]);\n\n        case 12:\n          _context10.next = 14;\n          return all([takeEvery(actionTypes.GET_PRODUCTS_BY_BRAND, getProductByBrand)]);\n\n        case 14:\n          _context10.next = 16;\n          return all([takeEvery(actionTypes.GET_PRODUCTS_BY_KEYWORD, getProductByKeyword)]);\n\n        case 16:\n          _context10.next = 18;\n          return all([takeEvery(actionTypes.GET_PRODUCT_BY_ID, getProductById)]);\n\n        case 18:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  }, _marked10);\n}","map":null,"metadata":{},"sourceType":"module"}