{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { getProductsByKeyword } from '../../../store/product/action';\nimport ProductResult from '../../elements/products/ProductSearchResult';\nimport { connect } from 'react-redux';\n\nvar PanelSearch =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PanelSearch, _Component);\n\n  function PanelSearch(props) {\n    var _this;\n\n    _classCallCheck(this, PanelSearch);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PanelSearch).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"searchByProductName\", function (keyword, object) {\n      var matches = [];\n      var regexp = new RegExp(keyword.toLowerCase(), 'g');\n      object.forEach(function (product) {\n        if (product.title.toLowerCase().match(regexp)) matches.push(product);\n      });\n      return matches;\n    });\n\n    _this.state = {\n      searchPanel: false,\n      searchProducts: [],\n      keyword: ''\n    };\n    return _this;\n  }\n\n  _createClass(PanelSearch, [{\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      e.preventDefault();\n      var keyword = this.state.keyword;\n      Router.push(\"/search?keyword=\".concat(keyword));\n    }\n  }, {\n    key: \"handleSearch\",\n    value: function handleSearch(e) {\n      if (e.target.value !== '') {\n        var keyword = e.target.value;\n        this.props.dispatch(getProductsByKeyword(keyword));\n        this.setState({\n          searchPanel: true,\n          keyword: e.target.value\n        });\n      } else {\n        this.setState({\n          searchPanel: false,\n          searchProducts: []\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var searchProducts = this.state.searchProducts;\n      var searchResults = this.props.searchResults;\n      return __jsx(\"div\", {\n        className: \"ps-panel__search-results\"\n      }, __jsx(\"form\", {\n        className: \"ps-form--search-mobile\",\n        action: \"/\",\n        method: \"get\"\n      }, __jsx(\"div\", {\n        className: \"form-group--nest\"\n      }, __jsx(\"input\", {\n        className: \"form-control\",\n        type: \"text\",\n        placeholder: \"Search something...\",\n        onChange: this.handleSearch.bind(this)\n      }), __jsx(\"button\", null, __jsx(\"i\", {\n        className: \"icon-magnifier\"\n      })))), searchResults && searchResults.map(function (product) {\n        return __jsx(ProductResult, {\n          product: product,\n          key: product.id\n        });\n      }));\n    }\n  }]);\n\n  return PanelSearch;\n}(Component);\n\nexport default connect(function (state) {\n  return state.product;\n})(PanelSearch);","map":null,"metadata":{},"sourceType":"module"}