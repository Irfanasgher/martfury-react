{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(getWishlistListSaga),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(addItemToWishlistSaga),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(removeItemWishlistSaga),\n    _marked4 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(clearWishlistListSaga),\n    _marked5 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(rootSaga);\n\nimport { all, put, takeEvery } from 'redux-saga/effects';\nimport { notification } from 'antd';\nimport { actionTypes, getWishlistListSuccess, updateWishlistListSuccess } from './action';\n\nvar modalSuccess = function modalSuccess(type) {\n  notification[type]({\n    message: 'Added to wishlisht!',\n    description: 'This product has been added to wishlist!'\n  });\n};\n\nvar modalWarning = function modalWarning(type) {\n  notification[type]({\n    message: 'Removed from wishlist',\n    description: 'This product has been removed from wishlist!'\n  });\n};\n\nfunction getWishlistListSaga() {\n  var localWishlistList;\n  return _regeneratorRuntime.wrap(function getWishlistListSaga$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          localWishlistList = JSON.parse(localStorage.getItem('persist:martfury')).wishlist;\n          _context.next = 4;\n          return put(getWishlistListSuccess(localWishlistList));\n\n        case 4:\n          _context.next = 9;\n          break;\n\n        case 6:\n          _context.prev = 6;\n          _context.t0 = _context[\"catch\"](0);\n          console.log(_context.t0);\n\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[0, 6]]);\n}\n\nfunction addItemToWishlistSaga(payload) {\n  var product, localWishlist, existItem;\n  return _regeneratorRuntime.wrap(function addItemToWishlistSaga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          product = payload.product;\n          localWishlist = JSON.parse(JSON.parse(localStorage.getItem('persist:martfury')).wishlist);\n          existItem = localWishlist.wishlistItems.find(function (item) {\n            return item.id === product.id;\n          });\n\n          if (existItem) {\n            _context2.next = 10;\n            break;\n          }\n\n          localWishlist.wishlistItems.push(product);\n          localWishlist.wishlistTotal++;\n          _context2.next = 9;\n          return put(updateWishlistListSuccess(localWishlist));\n\n        case 9:\n          modalSuccess('success');\n\n        case 10:\n          _context2.next = 15;\n          break;\n\n        case 12:\n          _context2.prev = 12;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.log(_context2.t0);\n\n        case 15:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, null, [[0, 12]]);\n}\n\nfunction removeItemWishlistSaga(payload) {\n  var product, localWishlist, index;\n  return _regeneratorRuntime.wrap(function removeItemWishlistSaga$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          product = payload.product;\n          localWishlist = JSON.parse(JSON.parse(localStorage.getItem('persist:martfury')).wishlist);\n          index = localWishlist.wishlistItems.indexOf(product);\n          localWishlist.wishlistTotal = localWishlist.wishlistTotal - 1;\n          localWishlist.wishlistItems.splice(index, 1);\n          _context3.next = 8;\n          return put(updateWishlistListSuccess(localWishlist));\n\n        case 8:\n          modalWarning('warning');\n          _context3.next = 14;\n          break;\n\n        case 11:\n          _context3.prev = 11;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.log(_context3.t0);\n\n        case 14:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, null, [[0, 11]]);\n}\n\nfunction clearWishlistListSaga() {\n  var emptyCart;\n  return _regeneratorRuntime.wrap(function clearWishlistListSaga$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          emptyCart = {\n            wishlistItems: [],\n            wishlistTotal: 0\n          };\n          _context4.next = 4;\n          return put(updateWishlistListSuccess(emptyCart));\n\n        case 4:\n          _context4.next = 9;\n          break;\n\n        case 6:\n          _context4.prev = 6;\n          _context4.t0 = _context4[\"catch\"](0);\n          console.log(_context4.t0);\n\n        case 9:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, null, [[0, 6]]);\n}\n\nexport default function rootSaga() {\n  return _regeneratorRuntime.wrap(function rootSaga$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return all([takeEvery(actionTypes.GET_WISHLIST_LIST, getWishlistListSaga)]);\n\n        case 2:\n          _context5.next = 4;\n          return all([takeEvery(actionTypes.ADD_ITEM_WISHLISH, addItemToWishlistSaga)]);\n\n        case 4:\n          _context5.next = 6;\n          return all([takeEvery(actionTypes.REMOVE_ITEM_WISHLISH, removeItemWishlistSaga)]);\n\n        case 6:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}","map":null,"metadata":{},"sourceType":"module"}