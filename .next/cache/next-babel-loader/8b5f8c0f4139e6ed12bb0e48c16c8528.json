{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Router from 'next/router';\nimport { connect } from 'react-redux';\nimport { Slider, Checkbox } from 'antd';\nimport { getProducts, getTotalProducts, getProductsByPrice, getBrands, getProductsByBrand, getProductCategories, getProductsByCategory } from '../../../../store/product/action';\n\nvar ShopWidget =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ShopWidget, _Component);\n\n  function ShopWidget(props) {\n    var _this;\n\n    _classCallCheck(this, ShopWidget);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ShopWidget).call(this, props));\n    _this.state = {\n      priceMin: 0,\n      priceMax: 2000\n    };\n    return _this;\n  }\n\n  _createClass(ShopWidget, [{\n    key: \"handleChangeRange\",\n    value: function handleChangeRange(value) {\n      this.setState({\n        priceMin: value[0],\n        priceMax: value[1]\n      });\n      var params = {\n        price_gt: value[0],\n        price_lt: value[1],\n        _start: 1,\n        _limit: 999\n      };\n      this.props.dispatch(getProductsByPrice(params));\n    }\n  }, {\n    key: \"handleFilterByBrand\",\n    value: function handleFilterByBrand(value) {\n      if (value.length > 0) {\n        this.props.dispatch(getProductsByBrand(value));\n        Router.push({\n          pathname: '/shop',\n          query: {\n            brand: value\n          }\n        });\n      } else {\n        var params = {\n          _start: 1,\n          _limit: 12\n        };\n        this.props.dispatch(getProducts(params));\n        this.props.dispatch(getTotalProducts());\n      }\n    }\n  }, {\n    key: \"handleFilterProductsByCategory\",\n    value: function handleFilterProductsByCategory(e, slug) {\n      e.preventDefault();\n\n      if (slug !== null) {\n        Router.push({\n          pathname: '/shop',\n          query: {\n            category: slug\n          }\n        });\n        this.props.dispatch(getProductsByCategory(slug));\n      } else {\n        var params = {\n          _start: 1,\n          _limit: 12\n        };\n        this.props.dispatch(getProducts(params));\n        this.props.dispatch(getTotalProducts());\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.dispatch(getBrands());\n      this.props.dispatch(getProductCategories());\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          brands = _this$props.brands,\n          categories = _this$props.categories;\n      var brandsGroup = [];\n\n      if (brands.length > 0) {\n        brands.forEach(function (brand) {\n          brandsGroup.push({\n            id: brand.id,\n            value: brand.id,\n            label: brand.name\n          });\n        });\n      }\n\n      return __jsx(\"div\", {\n        className: \"ps-layout__left\"\n      }, __jsx(\"aside\", {\n        className: \"widget widget_shop\"\n      }, __jsx(\"h4\", {\n        className: \"widget-title\"\n      }, \"Categories\"), categories && categories.length > 0 ? __jsx(\"ul\", {\n        className: \"ps-list--categories\"\n      }, __jsx(\"li\", null, __jsx(\"a\", {\n        href: \"/shop\",\n        onClick: function onClick(e) {\n          return _this2.handleFilterProductsByCategory(e, null);\n        }\n      }, \"All\")), categories.map(function (category) {\n        return __jsx(\"li\", {\n          key: category.id\n        }, __jsx(\"a\", {\n          href: \"shop?category=\".concat(category.slug),\n          onClick: function onClick(e) {\n            return _this2.handleFilterProductsByCategory(e, category.slug);\n          }\n        }, category.name));\n      })) : 'No Category'), __jsx(\"aside\", {\n        className: \"widget widget_shop\"\n      }, __jsx(\"h4\", {\n        className: \"widget-title\"\n      }, \"By Brands\"), __jsx(\"figure\", null, __jsx(Checkbox.Group, {\n        options: brandsGroup,\n        onChange: this.handleFilterByBrand.bind(this)\n      })), __jsx(\"figure\", null, __jsx(\"h4\", {\n        className: \"widget-title\"\n      }, \"By Price\"), __jsx(Slider, {\n        range: true,\n        defaultValue: [0, 2000],\n        max: 2000,\n        onAfterChange: this.handleChangeRange.bind(this)\n      }), __jsx(\"p\", null, \"Price: $\", this.state.priceMin, \" - $\", this.state.priceMax))));\n    }\n  }]);\n\n  return ShopWidget;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return state.product;\n};\n\nexport default connect(mapStateToProps)(ShopWidget);","map":null,"metadata":{},"sourceType":"module"}